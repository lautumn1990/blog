---
title: ç”¨zshå¢å¼ºshell
tags: [ shell ]
categories: [ shell ]
key: shell-zsh
pageview: true
---

## ç”¨zshå¢å¼ºshell

<!--more-->

### å®‰è£…

ubuntu å®‰è£… zsh

```shell
sudo apt install zsh
```

å¦‚æœæ²¡æœ‰åˆ‡æ¢zsh, è¯·ç”¨ä»¥ä¸‹å‘½ä»¤åˆ‡æ¢shell

```shell
chsh -s $(which zsh)
```

#### å¢å¼ºçš„åŠŸèƒ½

å‚è€ƒ[ä¸€äº›å‘½ä»¤è¡Œæ•ˆç‡å·¥å…·](http://wulfric.me/2015/08/zsh/)

1. **è¡¥å…¨**

    zsh çš„å‘½ä»¤è¡¥å…¨åŠŸèƒ½éå¸¸å¼ºå¤§ï¼Œå¯ä»¥è¡¥é½è·¯å¾„ï¼Œè¡¥é½å‘½ä»¤ï¼Œè¡¥é½å‚æ•°ç­‰ã€‚ï¼ˆè¯·é—®ä½ è®°ä½ tar çš„æ‰€æœ‰å‚æ•°äº†å—ğŸ˜ƒï¼Œåªè¦ tar -åŠ  tab é”®ï¼Œå†ä¹Ÿä¸ç”¨ rtfm äº†ğŸ˜‚ï¼‰

    ä»¥å‰æ€è¿›ç¨‹æ˜¯`ps aux | grep xxx`æŸ¥è¿›ç¨‹çš„ PIDï¼Œç„¶åkill PIDã€‚æœ‰äº† zshï¼Œç›´æ¥kill xxxç„¶åæŒ‰ä¸‹ tab é”®å³å¯

1. **åˆ«å**

    zsh ä¸ä»…æ”¯æŒæ™®é€š aliasï¼Œè¿˜æ”¯æŒé’ˆå¯¹æ–‡ä»¶ç±»å‹çš„ aliasã€‚

1. **è·³è½¬**

    zsh çš„ç›®å½•è·³è½¬æ›´ä¸ºæ™ºèƒ½ï¼Œä½ æ— éœ€è¾“å…¥cdï¼Œç›´æ¥è¾“å…¥è·¯å¾„å³å¯ã€‚..è¡¨ç¤ºåé€€ä¸€çº§ç›®å½•ï¼Œ../../è¡¨ç¤ºåé€€ä¸¤çº§ï¼Œä¾æ¬¡ç±»æ¨ã€‚ï¼ˆ...çš„ä½œç”¨å’Œ../../ç›¸åŒï¼‰

    è¾“å…¥dï¼Œå°†åˆ—å‡ºå½“å‰ session è®¿é—®è¿‡çš„æ‰€æœ‰ç›®å½•ï¼Œå†æŒ‰æç¤ºçš„æ•°å­—å³å¯è¿›å…¥ç›¸åº”ç›®å½•ã€‚

1. **å†å²è®°å½•**

    zsh çš„å†å²è®°å½•è·¨ sessionï¼Œå¯ä»¥å…±äº«ã€‚å†å²è®°å½•æ”¯æŒå—é™æŸ¥æ‰¾ã€‚æ¯”å¦‚ï¼Œè¾“å…¥gitï¼Œå†æŒ‰å‘ä¸Šç®­å¤´ï¼Œä¼šæœç´¢ç”¨è¿‡çš„æ‰€æœ‰ git å‘½ä»¤ã€‚

### ç¾åŒ–

å®‰è£…oh-my-zsh, å‚è€ƒ[oh-my-zsh](https://ohmyz.sh/#install), [github](https://github.com/ohmyzsh/ohmyzsh#basic-installation)

```shell
sh -c "$(curl -fsSL https://raw.github.com/ohmyzsh/ohmyzsh/master/tools/install.sh)"
```

å‚åŠ [å®˜æ–¹ä¸»é¢˜](https://github.com/ohmyzsh/ohmyzsh/wiki/Themes)

é€‰ç”¨ä¸»é¢˜`ys`

æ–¹æ³•, ä¿®æ”¹`.zshrc`, `ZSH_THEME="ys"`, ç„¶å`source ~/.zshrc`ä½¿å‘½ä»¤ç”Ÿæ•ˆ

ä¸å»ºè®®ä½¿ç”¨`powerlevel10k`([github]((https://github.com/romkatv/powerlevel10k)))ç­‰ä½¿ç”¨ç‰¹æ®Šå­—ç¬¦çš„ä¸»é¢˜, å› ä¸ºå®¢æˆ·ç«¯éœ€è¦å®‰è£…ç‰¹æ®Šçš„å­—ä½“æ‰èƒ½é…åˆä½¿ç”¨, å¦åˆ™ä¼šæ˜¾ç¤ºå¼‚å¸¸
{:.info}

### æ’ä»¶

#### [thefuck](https://github.com/nvbn/thefuck)

å½“æˆ‘ä»¬è¾“å…¥å‘½ä»¤é”™è¯¯æ—¶ï¼Œè¾“å…¥fuckï¼Œç»ˆç«¯å°±ä¼šä¹–ä¹–çš„ç»™æˆ‘ä»¬æ­£ç¡®çš„æŒ‡ä»¤é€‰æ‹©äº†ï¼
å®‰è£…æ–¹æ³•, å‚è€ƒ[thefuck](https://github.com/nvbn/thefuck#installation)

```shell
sudo apt update
sudo apt install python3-dev python3-pip python3-setuptools
pip3 install thefuck --user
```

ä¿®æ”¹é…ç½®æ–‡ä»¶`.zshrc`

```shell
plugins=(... thefuck)
```

é»˜è®¤å¿«æ·é”®ä¸¤æ¬¡ESC, æˆ–è€…è¾“å…¥`fuck`

å¦‚æœå®‰è£…å®Œ, è¿˜å‡ºç°æœªå®‰è£…çš„æƒ…å†µ, å°†`$HOME/.local/bin`åŠ å…¥ç¯å¢ƒå˜é‡, ä¿®æ”¹`.zshrc`, `export PATH=$HOME/.local/bin:$PATH`

#### [autojump](https://github.com/wting/autojump)

é¡¹ç›®[ä¸»é¡µ](https://github.com/wting/autojump#installation)

```shell
git clone git://github.com/wting/autojump.git
cd autojump
python install.py
cd ..
rm -rf autojump
```

ä¿®æ”¹é…ç½®æ–‡ä»¶`.zshrc`

```shell
plugins=(... autojump)
```

ä½¿ç”¨`j éƒ¨åˆ†è·¯å¾„å`, å³å¯è°ƒåˆ°ä¹‹å‰çš„ç›®å½•, `jc å½“å‰ç›®å½•å­ç›®å½•`, å¯ä»¥ä¸ç”¨å…¨å

æŸ¥çœ‹çŠ¶æ€`j --stat`, `j --purge` åˆ é™¤æ— æ•ˆè·¯å¾„

#### [last-working-dir](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/last-working-dir)

å¯ä»¥è®°å½•æˆ‘é€€å‡ºç»ˆç«¯æ—¶æ‰€åœ¨çš„è·¯å¾„ï¼Œå†æ¬¡æ‰“å¼€æ—¶è¿˜åœ¨è¿™ä¸ªè·¯å¾„

#### [git]((https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git))

[gitå‘½ä»¤ç¼©å†™](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/git)

æŸ¥çœ‹å‘½ä»¤`alias | grep git`{:.info}

```shell
gaa = git add --all
gcmsg = git commit -m
ga = git add
gst = git status
gp = git push
```

#### [zsh-syntax-highlighting](https://github.com/zsh-users/zsh-syntax-highlighting)

è¯­æ³•é«˜äº®æ’ä»¶

```shell
git clone https://github.com/zsh-users/zsh-syntax-highlighting.git ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-syntax-highlighting
```

#### [zsh-autosuggestions](https://github.com/zsh-users/zsh-autosuggestions)

è‡ªåŠ¨è¡¥å…¨å»ºè®®æ’ä»¶, `â†’`å’Œ`ctrl+f`è‡ªåŠ¨è¡¥å…¨, `ctrl+â†’`è¡¥å…¨ä¸€ä¸ªå•è¯

```shell
git clone https://github.com/zsh-users/zsh-autosuggestions $ZSH_CUSTOM/plugins/zsh-autosuggestions
```

å¦‚æœé¢œè‰²ä¸æ˜¯ç°è‰², å¯ä»¥å‚è€ƒ[zsh autosuggestionsåœ¨tmuxç¯å¢ƒä¸‹é«˜äº®é—®é¢˜å¤„ç†](https://www.mojidong.com/post/2017-05-14-zsh-autosuggestions/)

```shell
echo "export TERM=xterm-256color" >> ~/.zshrc
```

#### [extract](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/extract)

è‡ªåŠ¨é€‰æ‹©åˆé€‚çš„æ–¹å¼è§£å‹æ–‡ä»¶, ä½¿ç”¨`extract`å‘½ä»¤å³å¯

#### [colored-man-pages](https://github.com/ohmyzsh/ohmyzsh/tree/master/plugins/colored-man-pages)

å½©è‰²çš„manæ‰‹å†Œ

#### [history-substring-search](https://github.com/zsh-users/zsh-history-substring-search)

```shell
git clone https://github.com/zsh-users/zsh-history-substring-search ${ZSH_CUSTOM:-~/.oh-my-zsh/custom}/plugins/zsh-history-substring-search
```

## ç¼–è¾‘å®Œæ–‡ä»¶å¿˜è®°sudo

```shell
:w !sudo tee %
```

## é…ç½®æ–‡ä»¶

```shell
export PATH=$HOME/.local/bin:$PATH
export ZSH="$HOME/.oh-my-zsh"
ZSH_THEME="ys"
plugins=(
    git
    pip
    thefuck
    autojump
    last-working-dir
    zsh-syntax-highlighting
    zsh-autosuggestions
    extract
    colored-man-pages
    history-substring-search
)
source $ZSH/oh-my-zsh.sh
export TERM=xterm-256color
```

## grepè¿‡æ»¤æ³¨é‡Šç©ºè¡Œ

```shell
grep -Ev "^$|^[#;]" .zshrc
```

## å‚è€ƒ

- [å®˜ç½‘](https://ohmyz.sh)
- [zshï¼oh-my-zshï¼ å¥½çœ‹çš„ä¸»é¢˜å’Œæ’ä»¶ä»¥åŠæˆ‘çš„.zshrc](https://www.cnblogs.com/brady-wang/p/13834482.html)
- [oh-my-zsh æ’ä»¶](https://hufangyun.com/2017/zsh-plugin/)
- [oh my zshæœ‰å“ªäº›å¿…å¤‡çš„æ’ä»¶æ¨èï¼Ÿ](https://www.zhihu.com/question/49284484)
